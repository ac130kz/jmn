package org.netbeans.modules.musician.actions;

import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.awt.ActionReferences;
import org.openide.awt.ActionRegistration;
import org.openide.loaders.DataObject;
import org.openide.nodes.Node;
import org.openide.util.HelpCtx;
import org.openide.util.NbBundle;
import org.openide.util.actions.CookieAction;

//@ActionID(id = "org.netbeans.modules.musician.actions.PlayAction", category = "System")
//@ActionRegistration(displayName = "#CTL_PlayAction")
//@ActionReferences(value = {
//    @ActionReference(path = "Menu/File"),
//    @ActionReference(path = "Toolbars/Edit")})
public final class PlayAction extends CookieAction {
    
    protected void performAction(Node[] activatedNodes) {
        DataObject c = (DataObject) activatedNodes[0].getCookie(DataObject.class);
        // TODO use c
//        String good = " abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789#[]_=";
//        String result = "";
//        
//        int editorLength = editor_instance.findInstance().getContent().length();
//        String editorCharacters = editor_instance.findInstance().getContent();
//        
//        for ( int i = 0; i < editorLength; i++ ) {
//            if ( good.indexOf(editorCharacters.charAt(i)) >= 0 )
//                result += editorCharacters.charAt(i);
//        }
//
//        result = result.trim();
//        Player player = new Player();
//        Pattern pattern = new Pattern(result);
//        player.play(pattern);
//        // close is a new method in the class org.jfugue.Player, 
//        // that releases the resources used (at the level of javax.sound.midi.Sequencer)
//        player.close();
//        
//        StatusDisplayer.getDefault().setStatusText("Successfully played!");
        
    }
    
    protected int mode() {
        return CookieAction.MODE_EXACTLY_ONE;
    }
    
    public String getName() {
        return NbBundle.getMessage(PlayAction.class, "CTL_PlayAction");
    }
    
    protected Class[] cookieClasses() {
        return new Class[] {
            DataObject.class
        };
    }
    
    protected String iconResource() {
        return "org/netbeans/modules/musician/resources/Play16.gif";
    }
    
    public HelpCtx getHelpCtx() {
        return HelpCtx.DEFAULT_HELP;
    }
    
    protected boolean asynchronous() {
        return false;
    }
    
}

